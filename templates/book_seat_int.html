<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="keywords" content="" />
		<script type="application/x-javascript">
			addEventListener("load", function() {
				setTimeout(hideURLbar, 0);
			}, false);
			function hideURLbar() {
				window.scrollTo(0, 1);
			}
		</script>
		<title>Choose Seat</title>
		<meta content='width=device-width, initial-scale=1.0, shrink-to-fit=no' name='viewport' />
		<link rel="icon" href="/assets/img/icon.ico" type="image/x-icon"/>
	
		<!-- Fonts and icons -->
		<script src="/assets/js/plugin/webfont/webfont.min.js"></script>
		<script>
			WebFont.load({
				google: {"families":["Lato:300,400,700,900"]},
				custom: {"families":["Flaticon", "Font Awesome 5 Solid", "Font Awesome 5 Regular", "Font Awesome 5 Brands", "simple-line-icons"], urls: ['assets/css/fonts.min.css']},
				active: function() {
					sessionStorage.fonts = true;
				}
			});
		</script>
	
		<!-- CSS Files -->
		<link rel="stylesheet" href="/assets/css/bootstrap.min.css">
		<link rel="stylesheet" href="/assets/css/atlantis.min.css">
		<link href="/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" media="all" />
		<link href="/assets/css/font-awesome.css" rel="stylesheet">
		<link rel="stylesheet" href="/assets/css/chocolat.css" type="text/css" media="screen">
		<link href="/assets/css/easy-responsive-tabs.css" rel='stylesheet' type='text/css' />
		<link rel="stylesheet" href="/assets/css/flexslider.css" type="text/css" media="screen" property="" />
		<link rel="stylesheet" href="/assets/css/jquery-ui.css" />
		<link href="/assets/css/style.css" rel="stylesheet" type="text/css" media="all" />
		<script type="text/javascript" src="/assets/js/modernizr-2.6.2.min.js"></script>
	{##}
		<link href="http://fonts.googleapis.com/css?family=Oswald:300,400,700" rel="stylesheet">
		<link href="http://fonts.googleapis.com/css?family=Federo" rel="stylesheet">
	
		<!-- CSS Just for demo purpose, don't include it in your project -->

	</head>
<body data-background-color="dark">
	<div class="wrapper">
		<div class="main-header">
			<!-- Logo Header -->
			<div class="logo-header" data-background-color="dark2">
				
				
					<img src="/assets/img/Fudan_University_Logo.svg" alt="navbar brand" class="navbar-brand">

				<button class="navbar-toggler sidenav-toggler ml-auto" type="button" data-toggle="collapse" data-target="collapse" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon">
						<i class="icon-menu"></i>
					</span>
				</button>
				<button class="topbar-toggler more"><i class="icon-options-vertical"></i></button>
				<div class="nav-toggle">
					<button class="btn btn-toggle toggle-sidebar">
						<i class="icon-menu"></i>
					</button>
				</div>
			</div>
			<!-- End Logo Header -->

			<!-- Navbar Header -->
			<nav class="navbar navbar-header navbar-expand-lg" data-background-color="dark">
				
				<div class="container-fluid">
					<div class="collapse" id="search-nav">
						
					</div>
					<ul class="navbar-nav topbar-nav ml-md-auto align-items-center">
						<li class="nav-item toggle-nav-search hidden-caret">
							<a class="nav-link" data-toggle="collapse" href="#search-nav" role="button" aria-expanded="false" aria-controls="search-nav">
								<i class="fa fa-search"></i>
							</a>
						</li>
						<li class="nav-item dropdown hidden-caret">
							<a class="dropdown-toggle profile-pic" data-toggle="dropdown" href="#" aria-expanded="false">
								<div class="avatar-sm">
									
								</div>
							</a>
							<ul class="dropdown-menu dropdown-user animated fadeIn">
								<div class="dropdown-user-scroll scrollbar-outer">
									
								</div>
							</ul>
						</li>
					</ul>
				</div>
			</nav>
			<!-- End Navbar -->
		</div>

		<!-- Sidebar -->
		<div class="sidebar sidebar-style-2" data-background-color="dark2" >
			<div class="sidebar-wrapper scrollbar scrollbar-inner">
				<div class="sidebar-content">
					<div class="user pt-5" >
						<div class="avatar-sm float-left mr-2 ">
							<span class="avatar-title rounded-circle border border-white bg-danger">{{ user_name.0 }}</span>
						</div>
						<div class="info">
							<a data-toggle="collapse" href="#collapseExample" aria-expanded="true">
								<span>
									{{ user_name }}
									<span class="user-level">Student</span>
									<span class="caret"></span>
								</span>
							</a>
							<div class="clearfix"></div>

							<div class="collapse in" id="collapseExample">
								<ul class="nav">
									<li>
										<a href="/home">
											<span class="link-collapse">Home</span>
										</a>
									</li>
									<li>
										<a href="/change_password">
											<span class="link-collapse">Change Password</span>
										</a>
									</li>
									<li>
										<a href="/logout">
											<span class="link-collapse">Log Out</span>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<ul class="nav nav-primary">
						<li class="nav-section">
							<span class="sidebar-mini-icon">
								<i class="fa fa-ellipsis-h"></i>
							</span>
							<h4 class="text-section">Components</h4>
						</li>
						<li class="nav-item">
							<a data-toggle="collapse" href="#base">
								<i class="fas fa-layer-group"></i>
								<p>Seat Reservation</p>
								<span class="caret"></span>
							</a>
							<div class="collapse" id="base">
								<ul class="nav nav-collapse">
									<li>
										<a href="/choose_room">
											<span class="sub-item">Book a Seat</span>
										</a>
									</li>
									<li>
										<a href="/home">
											<span class="sub-item">Cancel a Seat</span>
										</a>
									</li>
									<li>
										<a href="/home">
											<span class="sub-item">Reservation History</span>
										</a>
									</li>
									<li>
										<a href="/rule">
											<span class="sub-item">Rules</span>
										</a>
									</li>
								</ul>
							</div>
						</li>
						<li class="nav-item">
							<a data-toggle="collapse" href="#sidebarLayouts">
								<i class="fas fa-th-list"></i>
								<p>Attention</p>
								<span class="caret"></span>
							</a>
							<div class="collapse" id="sidebarLayouts">
								<ul class="nav nav-collapse">
									<li>
										<a href="/look_friends">
											<span class="sub-item">My Attention&Fan</span>
										</a>
									</li>
	
									<li>
										<a href="/add_friends">
											<span class="sub-item">Add an Attention</span>
										</a>
									</li>
									
									<li>
										{% if user.close %}
											<a href="/open_attention">
												<span class="sub-item"> Open Attention </span>
											</a>	
										{% else %}
											<a href="/close_attention">
												<span class="sub-item"> Close Attention </span>
											</a>	
										{% endif %}
									</li>
								</ul>
							</div>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<!-- End Sidebar -->

		<div class="main-panel">
			<div class="content">
				<div class="page-inner">
					<div class="mt-2 mb-4">
						<h2 class="text-white pb-2">Welcome back, {{ user_name }}!</h2>
						<h5 class="text-white op-7 mb-4">Book your seat and find your friends!</h5>
					</div>

						

					<div class="row">
						<div class="col-md-12">
							<div class="card">
								<div class="card-header">
									<div class="card-title">Book a Seat in Room {{ room }}</div>
									<div class="input—group">
										From {{ begin_time }} to {{ end_time }}
									</div>
									<div class="input-group">
										<form action=/choose_seat method="POST" name="sentMessage" id = "contactForm">
											Begin：
											<select name='begin_time'>
												<option   value=8 > 08:00</option>
												<option   value=9 > 09:00</option>
												<option  value=10 > 10:00</option>
												<option  value=11 > 11:00</option>
												<option  value=12 > 12:00</option>
												<option  value=13 > 13:00</option>
												<option  value=14 > 14:00</option>
												<option  value=15 > 15:00</option>
												<option  value=16 > 16:00</option>
												<option  value=17 > 17:00</option>
												<option  value=18 > 18:00</option>
												<option  value=19 > 19:00</option>
												<option  value=20 > 20:00</option>
											</select>
											End：
											<select name="end_time">
												<option  value=10 > 10:00</option>
												<option  value=11 > 11:00</option>
												<option  value=12 > 12:00</option>
												<option  value=13 > 13:00</option>
												<option  value=14 > 14:00</option>
												<option  value=15 > 15:00</option>
												<option  value=16 > 16:00</option>
												<option  value=17 > 17:00</option>
												<option  value=18 > 18:00</option>
												<option  value=19 > 19:00</option>
												<option  value=20 > 20:00</option>
												<option  value=21 > 21:00</option>
												<option  value=22 > 22:00</option>
											</select>
											Date：
											<select name="day">
												<option value=0>Today</option>
												<option value=1>Tomorrow</option>
											</select>
											---->
											<button name="change_date"  value=True class="cbp-ig-category">Set</button>
										</form>
									</div>
								</div>
								<div class="card-body pb-0">
								<script type="text/javascript">
									function print_user_info(pos) {
										if (pos < 0) return;
										var data = JSON.parse('{{ seat_info|safe }}')[pos];
										var info = data['info'];
										info = info.replace(/WangSaORZORZWangSa/g, "\n");
										alert(info);
									}
								</script>
                                <script language="javascript">

                                var arr = JSON.parse('{{ seat_arr|safe }}');								

								var pos = 0;

                                for (var i = 0; i < arr.length; i++) {
                                    document.write("<ul class=\"cbp-ig-grid\">")
                                    for (var j = 0; j < arr[i].length; j++) {
                                        if (arr[i][j] == 2) {
                                            document.write("<li><form action=\"/choose_seat\" method=\"POST\" name=\"sentMessage\" id=\"contactForm\">")
                                            document.write("<div class=\"w3_grid_effect\">")
                                            document.write("<span class=\"cbp-ig-icon w3_cube\" onclick=\"javascript:print_user_info(" + pos.toString() + ")\"></span>")
                                            document.write("</div>")
                                            document.write("<button name = \"pos\"  value = " + pos.toString() + " class=\"cbp-ig-category\">Free</button>")
                                            document.write(" </form></li>")
                                        }
										else if (arr[i][j] == 1) {
                                            document.write("<li><form action=\"/choose_seat\" method=\"POST\" name=\"sentMessage\" id=\"contactForm\">")
                                            document.write("<div class=\"w3_grid_effect\">")
                                            document.write("<span class=\"cbp-ig-icon_ w3_cube\" onclick=\"javascript:print_user_info(" + pos.toString() + ")\"></span>")
                                            document.write("</div>")
                                            document.write("<button name = \"pos\"  value = " + pos.toString() + " class=\"cbp-ig-category\">Chosen</button>")
                                            document.write(" </form></li>")
										}
                                        else {
                                            document.write("<li><form action=\"/choose_seat\" method=\"POST\" name=\"sentMessage\" id=\"contactForm\">" +
                                                "                        <div class=\"w3_grid_effect_space\">" +
                                                "                        <span class=\"cbp-ig-icon w3_road\"></span>" +
                                                "                        </div>" +
                                                "                </form></li>");
                                        }
										pos++;
                                    }
                                    document.write("</ul>")
                                }


                                </script>

{#                                    {% autoescape off %}#}
{#                                    {{ part }}#}
{#                                    {% endautoescape %}#}
								</div>
							</div>
						</div>

					</div>




				</div>
			</div>

		</div>
		
		<!-- Custom template | don't include it in your project! -->
		
		<!-- End Custom template -->
	</div>
	<!--   Core JS Files   -->
	<script src="/assets/js/core/jquery.3.2.1.min.js"></script>
	<script src="/assets/js/core/popper.min.js"></script>
	<script src="/assets/js/core/bootstrap.min.js"></script>

	<!-- jQuery UI -->
	<script src="/assets/js/plugin/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script>
	<script src="/assets/js/plugin/jquery-ui-touch-punch/jquery.ui.touch-punch.min.js"></script>

	<!-- jQuery Scrollbar -->
	<script src="/assets/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js"></script>


	<!-- Chart JS -->
	<script src="/assets/js/plugin/chart.js/chart.min.js"></script>

	<!-- jQuery Sparkline -->
	<script src="/assets/js/plugin/jquery.sparkline/jquery.sparkline.min.js"></script>

	<!-- Chart Circle -->
	<script src="/assets/js/plugin/chart-circle/circles.min.js"></script>

	<!-- Datatables -->
	<script src="/assets/js/plugin/datatables/datatables.min.js"></script>

	<!-- Bootstrap Notify -->
	<script src="assets/js/plugin/bootstrap-notify/bootstrap-notify.min.js"></script>

	<!-- jQuery Vector Maps -->
	<script src="/assets/js/plugin/jqvmap/jquery.vmap.min.js"></script>
	<script src="/assets/js/plugin/jqvmap/maps/jquery.vmap.world.js"></script>

	<!-- Sweet Alert -->
	<script src="/assets/js/plugin/sweetalert/sweetalert.min.js"></script>

	<!-- Atlantis JS -->
	<script src="/assets/js/atlantis.min.js"></script>

	<!-- Atlantis DEMO methods, don't include it in your project! -->

</body>
</html>